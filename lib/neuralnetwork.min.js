!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NeuralNetwork=e():t.NeuralNetwork=e()}(this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";r.r(e);class n{constructor(t,e){this.n=t,this.m=e,this.data=new Array(t*e),this.size=t*e;for(let r=0;r<t;r++)for(let t=0;t<e;t++)r==t?this.setItem(r,t,1):this.setItem(r,t,0)}toArray(){return this.data}transpose(){let t=new n(this.m,this.n);for(let e=0;e<this.n;e++)for(let r=0;r<this.m;r++)t.setItem(r,e,this.getItem(e,r));return t}static zero(t,e){let r=new n(t,e);for(let t=0;t<r.data.length;t++)r.data[t]=0;return r}loadData(t){if(t.length!=this.data.length)throw new Error("Matrix data should be exactly "+this.n*this.m);for(let e=0;e<t.length;e++)this.data[e]=t[e]}display(){for(let t=0;t<this.n;t++)for(let e=0;e<this.m;e++)console.log(`(${t},${e}) =>`,this.getItem(t,e))}setItem(t,e,r){if(1!=this.m)this.data[t+e*this.n]=r;else{let n=e+t;this.data[n]=r}}getItem(t,e){return this.data[t+e*this.n]}randomize(){for(let t=0;t<this.data.length;t++)this.data[t]=2*Math.random()-1}copy(){let t=new n(this.n,this.m);for(let e=0;e<this.data.length;e++)t.data[e]=this.data[e];return t}add(t){for(let e=0;e<this.data.length;e++)this.data[e]+=t}mul(t){if(this.m!=t.n)throw new Error(`Trying to multiply a (${this.n},${this.m}) matrix with a (${t.n},${t.m})`);let e=n.zero(t.m,this.n);for(let r=0;r<this.n;r++)for(let n=0;n<t.m;n++){let s=0;for(let e=0;e<this.m;e++)s+=this.getItem(r,e)*t.getItem(e,n);e.setItem(r,n,s)}return e}}function s(t){return Math.max(t/10,t)}r.d(e,"default",function(){return a});class a{constructor(...t){let e,r,s,a,o;"object"==typeof t[0]?(e=t[0].inputs,s=t[0].hidden.slice(0),r=t[0].outputs,a=t[0].normalizeInput,o=t[0].normalizeOutput,s.push(r),this.options=t[0]):(e=t[0],s=t[1],r=t[2],this.options={inputs:t[0],hidden:[t[1]],outputs:t[2]}),this.score=0,this.inputs=e,this.outputs=r,this.normalizeInput=void 0===a||a,this.normalizeOutput=void 0===o||o,this.layers=[],this.layers.push(new n(e+1,s[0]));for(let t=1;t<s.length;t++)this.layers.push(new n(this.layers[t-1].m+1,s[t-1]));this.layers.forEach(t=>t.randomize())}compute(t){let e=t.slice(0);if(this.normalizeInput){let t=Math.max(...e);0==t&&(t=1),e=e.map(e=>e/t)}e.push(1);let r,a,o,i=new n(1,e.length);for(i.data=e,a=0;a<this.layers.length-1;a++){let t=this.layers[a];(r=(r=i.mul(t)).transpose()).data.push(1),r.m++,r.data=r.data.map(s)}let h=r.mul(this.layers[a]);return this.normalizeOutput?{percentages:o=(l=h.data).map(function(t,e){return Math.exp(t)/l.map(function(t){return Math.exp(t)}).reduce(function(t,e){return t+e})}),max:a=o.indexOf(Math.max(...o))}:h.data.slice();var l}getGenes(){let t=[];for(let e of this.layers)t=t.concat(e.data);return t}setGenes(t){for(let e of this.layers)e.data=t.splice(0,e.size)}crossover(t,e){let r=this.getGenes(),n=t.getGenes();if(r.length!=n.length)throw new Error("Can't crossover between two networks of different size!");let s=[];for(let t=0;t<r.length;t++)Math.random()>.5?s.push(r[t]):s.push(n[t]),Math.random()<e&&(Math.random()>.5?s[t]=2*Math.random()-1:s[t]+=.1*(2*Math.random()-1));let o=new a(this.options);return o.setGenes(s),o}}},function(t,e,r){t.exports=r(0).default}])});