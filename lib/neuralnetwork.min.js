!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NeuralNetwork=e():t.NeuralNetwork=e()}(this,function(){return function(t){var e={};function r(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";r.r(e);class s{constructor(t,e){this.n=t,this.m=e,this.data=new Array(t*e),this.size=t*e;for(let r=0;r<t;r++)for(let t=0;t<e;t++)r==t?this.setItem(r,t,1):this.setItem(r,t,0)}toArray(){return this.data}transpose(){let t=new s(this.m,this.n);for(let e=0;e<this.n;e++)for(let r=0;r<this.m;r++)t.setItem(r,e,this.getItem(e,r));return t}static zero(t,e){let r=new s(t,e);for(let t=0;t<r.data.length;t++)r.data[t]=0;return r}loadData(t){if(t.length!=this.data.length)throw new Error("Matrix data should be exactly "+this.n*this.m);for(let e=0;e<t.length;e++)this.data[e]=t[e]}display(){for(let t=0;t<this.n;t++)for(let e=0;e<this.m;e++)console.log(`(${t},${e}) =>`,this.getItem(t,e))}setItem(t,e,r){if(1!=this.m)this.data[t+e*this.n]=r;else{let s=e+t;this.data[s]=r}}getItem(t,e){return this.data[t+e*this.n]}randomize(){for(let t=0;t<this.data.length;t++)this.data[t]=2*Math.random()-1}copy(){let t=new s(this.n,this.m);for(let e=0;e<this.data.length;e++)t.data[e]=this.data[e];return t}add(t){for(let e=0;e<this.data.length;e++)this.data[e]+=t}mul(t){if(this.m!=t.n)throw new Error(`Trying to multiply a (${this.n},${this.m}) matrix with a (${t.n},${t.m})`);let e=s.zero(t.m,this.n);for(let r=0;r<this.n;r++)for(let s=0;s<t.m;s++){let n=0;for(let e=0;e<this.m;e++)n+=this.getItem(r,e)*t.getItem(e,s);e.setItem(r,s,n)}return e}}r.d(e,"default",function(){return n});class n{constructor(...t){let e,r,n,a,i;"object"==typeof t[0]?(e=t[0].inputs,n=t[0].hidden.slice(0),r=t[0].outputs,a=t[0].normalizeInput,i=t[0].normalizeOutput,n.push(r),this.options=t[0]):(e=t[0],n=t[1],r=t[2],this.options={inputs:t[0],hidden:[t[1]],outputs:t[2]}),this.score=0,this.inputs=e,this.outputs=r,this.normalizeInput=void 0===a||a,this.normalizeOutput=void 0===i||i,this.layers=[],this.layers.push(new s(e+1,n[0]));for(let t=0;t<n.length;t++)this.layers.push(new s(this.layers[t].m+1,n[t]));this.layers.forEach(t=>t.randomize())}compute(t){let e=t.slice(0);if(this.normalizeInput){let t=Math.max(...e);0==t&&(t=1),e=e.map(e=>e/t)}e.push(1);let r=new s(1,e.length);r.data=e;let n,a,i=r;for(n=0;n<this.layers.length-1;n++){let t=this.layers[n];(i=(i=i.mul(t)).transpose()).data.push(1),i.m++,i.data=i.data.map(Math.tanh)}let o=i.mul(this.layers[n]);return this.normalizeOutput?{percentages:a=(h=o.data).map(function(t,e){return Math.exp(t)/h.map(function(t){return Math.exp(t)}).reduce(function(t,e){return t+e})}),max:n=a.indexOf(Math.max(...a))}:o.data.slice();var h}getGenes(){let t=[];for(let e of this.layers)t=t.concat(e.data);return t}setGenes(t){for(let e of this.layers)e.data=t.splice(0,e.size)}crossover(t,e){let r=this.getGenes(),s=t.getGenes();if(r.length!=s.length)throw new Error("Can't crossover between two networks of different size!");let a=[];for(let t=0;t<r.length;t++)if(Math.random()>.5?a.push(r[t]):a.push(s[t]),Math.random()<e){let e=2*Math.random()-1;Math.random()<.6?a[t]=e:a[t]+=.1*e}let i=new n(this.options);return i.setGenes(a),i}}},function(t,e,r){t.exports=r(0).default}])});